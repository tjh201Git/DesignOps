function Phi = buildPhi(Nodes,order,x1,x2,x3)

switch order

    case 1
Phi1order = [ ... 
    ones(Nodes,1), ...
    x1, x2, x3 ];
    Phi = Phi1order;
    return;

    case 2
Phi2order = [ ... 
    ones(Nodes,1), ...      
    x1, x2, x3, ...               
    x1.^2, x2.^2, x3.^2, ...       
    x1.*x2, x1.*x3, x2.*x3];     
    Phi = Phi2order;
    return;

    case 3
Phi3order = [ ...
    ones(Nodes,1), ...
    x1, x2, x3, ...
    x1.^2, x2.^2, x3.^2, ...
    x1.*x2, x1.*x3, x2.*x3, ...
    x1.^3, x2.^3, x3.^3, ...
    x1.^2 .* x2, x1.^2 .* x3, ...
    x2.^2 .* x1, x2.^2 .* x3, ...
    x3.^2 .* x1, x3.^2 .* x2, ...
    x1 .* x2 .* x3 ];
    Phi = Phi3order;
    return;

    case 4
Phi4order = [ ...
    ones(Nodes,1), ...
    x1, x2, x3, ...
    x1.^2, x2.^2, x3.^2, ...
    x1.*x2, x1.*x3, x2.*x3, ...
    x1.^3, x2.^3, x3.^3, ...
    x1.^2 .* x2, x1.^2 .* x3, ...
    x2.^2 .* x1, x2.^2 .* x3, ...
    x3.^2 .* x1, x3.^2 .* x2, ...
    x1 .* x2 .* x3, ...
    x1.^4, x2.^4, x3.^4, ...
    x1.^3 .* x2, x1.^3 .* x3, ...
    x2.^3 .* x1, x2.^3 .* x3, ...
    x3.^3 .* x1, x3.^3 .* x2, ...
    x1.^2 .* x2.^2, ...
    x1.^2 .* x3.^2, ...
    x2.^2 .* x3.^2, ...
    x1.^2 .* x2 .* x3, ...
    x2.^2 .* x1 .* x3, ...
    x3.^2 .* x1 .* x2 ];
    Phi = Phi4order;
    return;

    case 5
Phi5order = [ ...
    ones(Nodes,1), ...
    x1, x2, x3, ...
    x1.^2, x2.^2, x3.^2, ...
    x1.*x2, x1.*x3, x2.*x3, ...
    x1.^3, x2.^3, x3.^3, ...
    x1.^2 .* x2, x1.^2 .* x3, ...
    x2.^2 .* x1, x2.^2 .* x3, ...
    x3.^2 .* x1, x3.^2 .* x2, ...
    x1 .* x2 .* x3, ...
    x1.^4, x2.^4, x3.^4, ...
    x1.^3 .* x2, x1.^3 .* x3, ...
    x2.^3 .* x1, x2.^3 .* x3, ...
    x3.^3 .* x1, x3.^3 .* x2, ...
    x1.^2 .* x2.^2, ...
    x1.^2 .* x3.^2, ...
    x2.^2 .* x3.^2, ...
    x1.^2 .* x2 .* x3, ...
    x2.^2 .* x1 .* x3, ...
    x3.^2 .* x1 .* x2, ...
    x1.^5, x2.^5, x3.^5, ...
    x1.^4 .* x2, x1.^4 .* x3, ...
    x2.^4 .* x1, x2.^4 .* x3, ...
    x3.^4 .* x1, x3.^4 .* x2, ...
    x1.^3 .* x2.^2, x1.^3 .* x3.^2, ...
    x2.^3 .* x1.^2, x2.^3 .* x3.^2, ...
    x3.^3 .* x1.^2, x3.^3 .* x2.^2, ...
    x1.^3 .* x2 .* x3, ...
    x2.^3 .* x1 .* x3, ...
    x3.^3 .* x1 .* x2, ...
    x1.^2 .* x2.^2 .* x3, ...
    x1.^2 .* x3.^2 .* x2, ...
    x2.^2 .* x3.^2 .* x1 ];
    Phi = Phi5order;
    return;

end

end